import{l as h,aO as _,w as z,aP as M,aJ as y,aQ as A,ag as w,i as O,S as R,aR as B,aS as C,k as P,aT as T}from"./qSkdJHEn.js";function I(t,n,o){var f;let i;y(o)?i={evaluating:o}:i=o||{};const{lazy:r=!1,flush:v="pre",evaluating:e=void 0,shallow:s=!0,onError:a=(f=globalThis.reportError)!=null?f:A}=i,u=w(!r),l=s?w(n):O(n);let c=0;return R(async E=>{if(!u.value)return;c++;const g=c;let m=!1;e&&Promise.resolve().then(()=>{e.value=!0});try{const p=await t(S=>{E(()=>{e&&(e.value=!1),m||S()})});g===c&&(l.value=p)}catch(p){a(p)}finally{e&&g===c&&(e.value=!1),m=!0}},{flush:v}),r?h(()=>(u.value=!0,l.value)):l}const W=C?window:void 0;function b(t){var n;const o=_(t);return(n=o?.$el)!=null?n:o}function x(){const t=w(!1),n=T();return n&&P(()=>{t.value=!0},n),t}function D(t){const n=x();return h(()=>(n.value,!!t()))}function J(t,n,o={}){const{window:f=W,...i}=o;let r;const v=D(()=>f&&"ResizeObserver"in f),e=()=>{r&&(r.disconnect(),r=void 0)},s=h(()=>{const l=_(t);return Array.isArray(l)?l.map(c=>b(c)):[b(l)]}),a=z(s,l=>{if(e(),v.value&&f){r=new ResizeObserver(n);for(const c of l)c&&r.observe(c,i)}},{immediate:!0,flush:"post"}),u=()=>{e(),a()};return M(u),{isSupported:v,stop:u}}const d=new Map;function Q(t){const n=B();function o(e){var s;const a=d.get(t)||new Set;a.add(e),d.set(t,a);const u=()=>i(e);return(s=n?.cleanups)==null||s.push(u),u}function f(e){function s(...a){i(s),e(...a)}return o(s)}function i(e){const s=d.get(t);s&&(s.delete(e),s.size||r())}function r(){d.delete(t)}function v(e,s){var a;(a=d.get(t))==null||a.forEach(u=>u(e,s))}return{on:o,once:f,off:i,emit:v,reset:r}}export{J as a,b,I as c,Q as u};
